#!/bin/sh
# Small script to switch to a wallpaper using swaybg or swww and update pywal colors.
# Used by the rofi "frontend" accessible with SUPER+W.

# In case the wallpaper is a symlink, since ~/.config/hypr/scripts/current_wal is one
wallpaper=$(realpath "$1")
if test $wallpaper -z
then
	echo "No selection - skipping..."
else
	echo "=========================="
	echo "Setting wallpaper $wallpaper"
	echo "=========================="
	
	ln -sf "$wallpaper" "$HOME/.config/hypr/scripts/current_wal"
	#killall swaybg

	echo "=========================="
	echo "Updating pywal colors"
	echo "=========================="

	wal -i "$wallpaper"
	pywalfox update
	swww img "$wallpaper"
	swaync-client -rs
	#swaybg -i "$wallpaper" -m fill &
fi
